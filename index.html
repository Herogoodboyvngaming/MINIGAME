<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>MINI GAME ƒê∆Ø·ª¢C T·∫†O B·ªûI NGUY·ªÑN CH√ç D·ª∞</title>
    <style>
        body {
            font-family: 'Segoe UI', Arial, sans-serif;
            background: linear-gradient(135deg, #ff9a9e 0%, #fad0c4 100%);
            margin: 0;
            padding: 20px;
            min-height: 100vh;
            text-align: center;
            touch-action: manipulation;
            overscroll-behavior: none;
        }
        .header {
            margin: 30px 0;
        }
        h1 {
            font-size: 48px;
            color: #fff;
            text-shadow: 
                3px 3px 0px #ff6b6b,
                6px 6px 0px rgba(0,0,0,0.2);
            margin: 0;
            letter-spacing: 3px;
            animation: glow 2s ease-in-out infinite alternate;
        }
        .subtitle {
            font-size: 28px;
            color: #fff;
            font-weight: bold;
            margin: 15px 0 40px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.4);
            animation: bounce 3s infinite;
        }
        @keyframes glow {
            from { text-shadow: 0 0 10px #ff6b6b, 0 0 20px #ff6b6b; }
            to { text-shadow: 0 0 20px #ff9a9e, 0 0 30px #ff6b6b; }
        }
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        .menu {
            margin: 30px;
        }
        button {
            padding: 15px 30px;
            margin: 10px;
            font-size: 20px;
            cursor: pointer;
            background: linear-gradient(to bottom, #4facfe, #00f2fe);
            color: white;
            border: none;
            border-radius: 50px;
            box-shadow: 0 6px 15px rgba(0,0,0,0.3);
            transition: all 0.3s;
            touch-action: manipulation;
        }
        button:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.4);
        }
        .game-container {
            display: none;
            margin: 40px auto;
            max-width: 600px;
            background: rgba(255,255,255,0.9);
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        canvas {
            background-color: #fff;
            border: 3px solid #333;
            border-radius: 10px;
            max-width: 100%;
            height: auto;
            touch-action: none;
        }
        /* Responsive */
        @media (max-width: 768px) {
            h1 { font-size: 36px; }
            .subtitle { font-size: 22px; }
            button { font-size: 16px; padding: 10px 20px; }
        }
        @media (max-width: 480px) {
            h1 { font-size: 28px; }
            .subtitle { font-size: 18px; }
            button { font-size: 14px; padding: 8px 16px; }
        }
        #snakeControls {
            display: none;
            margin-top: 15px;
        }
        @media (pointer: coarse) {
            #snakeControls { display: block; }
        }
        #snakeControls button {
            padding: 12px 20px;
            margin: 5px;
            font-size: 18px;
            width: 60px;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>üéÆ MINI GAME ƒê∆Ø·ª¢C T·∫†O B·ªûI NGUY·ªÑN CH√ç D·ª∞ üéâ</h1>
        <div class="subtitle">ü•≥ CH√öC C√ÅC B·∫†N CH∆†I MINI GAME VUI V·∫∫ ü•≥</div>
    </div>

    <p style="font-size: 20px; color: white; text-shadow: 1px 1px 2px black;">Ch·ªçn m·ªôt mini game ph·ªï bi·∫øn ·ªü Vi·ªát Nam ƒë·ªÉ ch∆°i n√†o! üöÄ</p>
    
    <div class="menu">
        <button onclick="showGame('snake')">üêç R·∫Øn SƒÉn M·ªìi</button>
        <button onclick="showGame('tictactoe')">‚≠ï √î ƒÇn Quan (C·ªù Caro)</button>
        <button onclick="showGame('flappy')">üê¶ Flappy Bird</button>
        <button onclick="showGame('pikachu')">üÄÑ Pikachu Gh√©p C·∫∑p</button>
    </div>

    <!-- R·∫Øn SƒÉn M·ªìi -->
    <div id="snake" class="game-container">
        <h2>üêç R·∫Øn SƒÉn M·ªìi</h2>
        <p>D√πng ph√≠m m≈©i t√™n (PC/Mac) ho·∫∑c n√∫t d∆∞·ªõi (mobile) ƒë·ªÉ di chuy·ªÉn. ƒÇn th·ª©c ƒÉn ƒë·ªÉ d√†i ra nh√©!</p>
        <canvas id="snakeCanvas" width="400" height="400"></canvas>
        <div id="snakeScore">ƒêi·ªÉm: 0</div>
        <div id="snakeControls">
            <button onclick="changeDirection('up')">‚Üë</button><br>
            <button onclick="changeDirection('left')">‚Üê</button>
            <button onclick="changeDirection('down')">‚Üì</button>
            <button onclick="changeDirection('right')">‚Üí</button>
        </div>
    </div>

    <!-- √î ƒÇn Quan (C·ªù Caro) -->
    <div id="tictactoe" class="game-container">
        <h2>‚≠ï √î ƒÇn Quan (C·ªù Caro)</h2>
        <p>Ch∆°i v·ªõi m√°y t√≠nh. B·∫°n l√† X, m√°y l√† O.</p>
        <table style="margin: auto; border-collapse: separate; border-spacing: 10px;">
            <tr>
                <td onclick="playTTT(0)" style="width:80px;height:80px;background:#fff;border-radius:10px;box-shadow:0 4px 8px rgba(0,0,0,0.2);"><h1 id="ttt0" style="margin:0;font-size:60px;">&nbsp;</h1></td>
                <td onclick="playTTT(1)" style="width:80px;height:80px;background:#fff;border-radius:10px;box-shadow:0 4px 8px rgba(0,0,0,0.2);"><h1 id="ttt1" style="margin:0;font-size:60px;">&nbsp;</h1></td>
                <td onclick="playTTT(2)" style="width:80px;height:80px;background:#fff;border-radius:10px;box-shadow:0 4px 8px rgba(0,0,0,0.2);"><h1 id="ttt2" style="margin:0;font-size:60px;">&nbsp;</h1></td>
            </tr>
            <tr>
                <td onclick="playTTT(3)" style="width:80px;height:80px;background:#fff;border-radius:10px;box-shadow:0 4px 8px rgba(0,0,0,0.2);"><h1 id="ttt3" style="margin:0;font-size:60px;">&nbsp;</h1></td>
                <td onclick="playTTT(4)" style="width:80px;height:80px;background:#fff;border-radius:10px;box-shadow:0 4px 8px rgba(0,0,0,0.2);"><h1 id="ttt4" style="margin:0;font-size:60px;">&nbsp;</h1></td>
                <td onclick="playTTT(5)" style="width:80px;height:80px;background:#fff;border-radius:10px;box-shadow:0 4px 8px rgba(0,0,0,0.2);"><h1 id="ttt5" style="margin:0;font-size:60px;">&nbsp;</h1></td>
            </tr>
            <tr>
                <td onclick="playTTT(6)" style="width:80px;height:80px;background:#fff;border-radius:10px;box-shadow:0 4px 8px rgba(0,0,0,0.2);"><h1 id="ttt6" style="margin:0;font-size:60px;">&nbsp;</h1></td>
                <td onclick="playTTT(7)" style="width:80px;height:80px;background:#fff;border-radius:10px;box-shadow:0 4px 8px rgba(0,0,0,0.2);"><h1 id="ttt7" style="margin:0;font-size:60px;">&nbsp;</h1></td>
                <td onclick="playTTT(8)" style="width:80px;height:80px;background:#fff;border-radius:10px;box-shadow:0 4px 8px rgba(0,0,0,0.2);"><h1 id="ttt8" style="margin:0;font-size:60px;">&nbsp;</h1></td>
            </tr>
        </table>
        <button onclick="resetTTT()" style="margin-top:20px;padding:10px 20px;font-size:18px;">Ch∆°i l·∫°i</button>
        <p id="tttStatus" style="font-size:20px;font-weight:bold;margin-top:15px;"></p>
    </div>

    <!-- Flappy Bird -->
    <div id="flappy" class="game-container">
        <h2>üê¶ Flappy Bird</h2>
        <p>Nh·∫•n Space (PC/Mac) ho·∫∑c ch·∫°m m√†n h√¨nh (mobile) ƒë·ªÉ bay l√™n!</p>
        <canvas id="flappyCanvas" width="400" height="500"></canvas>
        <div id="flappyScore">ƒêi·ªÉm: 0</div>
    </div>

    <!-- Pikachu Gh√©p C·∫∑p -->
    <div id="pikachu" class="game-container">
        <h2>üÄÑ Pikachu Gh√©p C·∫∑p</h2>
        <p>Click/ch·∫°m hai √¥ gi·ªëng nhau ƒë·ªÉ gh√©p ƒë√¥i nh√©!</p>
        <div id="pikachuBoard" style="display: grid; grid-template-columns: repeat(4, 70px); gap: 10px; margin: 20px auto; width: fit-content;"></div>
        <button onclick="initPikachu()" style="padding:10px 20px;font-size:18px;">Ch∆°i l·∫°i</button>
        <p id="pikachuStatus" style="font-size:20px;font-weight:bold;">C√≤n l·∫°i: <span id="pairsLeft">8</span> c·∫∑p</p>
    </div>

    <script>
        function showGame(gameId) {
            document.querySelectorAll('.game-container').forEach(div => div.style.display = 'none');
            document.getElementById(gameId).style.display = 'block';
            if (gameId === 'snake') initSnake();
            if (gameId === 'flappy') initFlappy();
            if (gameId === 'pikachu') initPikachu();
            if (gameId === 'tictactoe') resetTTT();
            adjustCanvasSize();
        }

        function adjustCanvasSize() {
            const canvases = document.querySelectorAll('canvas');
            canvases.forEach(canvas => {
                const maxWidth = Math.min(window.innerWidth - 40, 400);
                const ratio = canvas.height / canvas.width;
                canvas.style.width = `${maxWidth}px`;
                canvas.style.height = `${maxWidth * ratio}px`;
            });
        }
        window.addEventListener('resize', adjustCanvasSize);

        // R·∫Øn SƒÉn M·ªìi
        let snakeCanvas, snakeCtx, snakeScore = 0;
        let snake = [{x: 200, y: 200}];
        let dx = 10, dy = 0;
        let foodX, foodY;
        let lastFrameTime = 0;
        let frameInterval = 100;
        let pendingDirection = null;

        function initSnake() {
            snakeCanvas = document.getElementById('snakeCanvas');
            snakeCtx = snakeCanvas.getContext('2d');
            snakeScore = 0;
            document.getElementById('snakeScore').innerText = 'ƒêi·ªÉm: 0';
            snake = [{x: 200, y: 200}];
            dx = 10; dy = 0;
            pendingDirection = null;
            createFood();
            lastFrameTime = performance.now();
            requestAnimationFrame(updateSnake);
        }

        function createFood() {
            foodX = Math.floor(Math.random() * 39) * 10 + 5;
            foodY = Math.floor(Math.random() * 39) * 10 + 5;
        }

        function updateSnake(currentTime) {
            if (currentTime - lastFrameTime > frameInterval) {
                lastFrameTime = currentTime;

                if (pendingDirection) {
                    switch (pendingDirection) {
                        case 'up': if (dy === 0) { dx = 0; dy = -10; } break;
                        case 'down': if (dy === 0) { dx = 0; dy = 10; } break;
                        case 'left': if (dx === 0) { dx = -10; dy = 0; } break;
                        case 'right': if (dx === 0) { dx = 10; dy = 0; } break;
                    }
                    pendingDirection = null;
                }

                snakeCtx.clearRect(0, 0, snakeCanvas.width, snakeCanvas.height);

                snake.forEach(part => {
                    snakeCtx.fillStyle = '#4CAF50';
                    snakeCtx.fillRect(part.x, part.y, 10, 10);
                    snakeCtx.strokeStyle = '#388E3C';
                    snakeCtx.strokeRect(part.x, part.y, 10, 10);
                });

                snakeCtx.fillStyle = '#FF5722';
                snakeCtx.fillRect(foodX, foodY, 10, 10);

                let head = {x: snake[0].x + dx, y: snake[0].y + dy};

                if (head.x < 0 || head.x >= snakeCanvas.width || head.y < 0 || head.y >= snakeCanvas.height || snake.slice(1).some(part => part.x === head.x && part.y === head.y)) {
                    alert('Game Over! ƒêi·ªÉm c·ªßa b·∫°n: ' + snakeScore);
                    return;
                }

                snake.unshift(head);

                if (head.x === foodX && head.y === foodY) {
                    snakeScore++;
                    document.getElementById('snakeScore').innerText = 'ƒêi·ªÉm: ' + snakeScore;
                    createFood();
                } else {
                    snake.pop();
                }
            }
            requestAnimationFrame(updateSnake);
        }

        document.addEventListener('keydown', e => {
            if (e.key === 'ArrowUp') pendingDirection = 'up';
            if (e.key === 'ArrowDown') pendingDirection = 'down';
            if (e.key === 'ArrowLeft') pendingDirection = 'left';
            if (e.key === 'ArrowRight') pendingDirection = 'right';
        });

        function changeDirection(dir) {
            pendingDirection = dir;
        }

        // C·ªù Caro
        let tttBoard = Array(9).fill(null);
        function playTTT(index) {
            if (tttBoard[index] || checkWinner(tttBoard)) return;
            tttBoard[index] = 'X';
            document.getElementById('ttt' + index).innerText = 'X';
            if (checkWinner(tttBoard)) {
                document.getElementById('tttStatus').innerText = 'üéâ B·∫°n th·∫Øng r·ªìi!';
                return;
            }
            if (tttBoard.every(cell => cell)) {
                document.getElementById('tttStatus').innerText = 'H√≤a nhau!';
                return;
            }
            setTimeout(computerMove, 300);
        }

        function computerMove() {
            let bestMove = -1;
            for (let i = 0; i < 9; i++) {
                if (!tttBoard[i]) {
                    tttBoard[i] = 'X';
                    if (checkWinner(tttBoard)) { bestMove = i; tttBoard[i] = null; break; }
                    tttBoard[i] = null;
                }
            }
            if (bestMove === -1) {
                for (let i = 0; i < 9; i++) {
                    if (!tttBoard[i]) {
                        tttBoard[i] = 'O';
                        if (checkWinner(tttBoard)) { bestMove = i; tttBoard[i] = null; break; }
                        tttBoard[i] = null;
                    }
                }
            }
            if (bestMove === -1) {
                let available = tttBoard.map((v, i) => v === null ? i : null).filter(v => v !== null);
                bestMove = available[Math.floor(Math.random() * available.length)];
            }
            tttBoard[bestMove] = 'O';
            document.getElementById('ttt' + bestMove).innerText = 'O';
            if (checkWinner(tttBoard)) document.getElementById('tttStatus').innerText = 'ü§ñ M√°y th·∫Øng!';
            else if (tttBoard.every(cell => cell)) document.getElementById('tttStatus').innerText = 'H√≤a nhau!';
        }

        function checkWinner(board) {
            const wins = [[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]];
            return wins.some(combo => combo.every(i => board[i] === board[combo[0]] && board[i]));
        }

        function resetTTT() {
            tttBoard = Array(9).fill(null);
            for (let i = 0; i < 9; i++) document.getElementById('ttt' + i).innerText = ' ';
            document.getElementById('tttStatus').innerText = '';
        }

        // Flappy Bird
        let flappyCanvas, flappyCtx, birdY = 250, birdVelocity = 0, pipes = [], flappyScore = 0;
        let gravity = 0.5, jump = -10;

        function initFlappy() {
            flappyCanvas = document.getElementById('flappyCanvas');
            flappyCtx = flappyCanvas.getContext('2d');
            birdY = 250; birdVelocity = 0; pipes = []; flappyScore = 0;
            document.getElementById('flappyScore').innerText = 'ƒêi·ªÉm: 0';
            pipes.push({x: 400, gap: Math.random() * 200 + 100});
            requestAnimationFrame(updateFlappy);
        }

        function updateFlappy() {
            flappyCtx.clearRect(0, 0, flappyCanvas.width, flappyCanvas.height);
            birdVelocity += gravity;
            birdY += birdVelocity;

            if (birdY > flappyCanvas.height - 30 || birdY < 0) {
                alert('Game Over! ƒêi·ªÉm c·ªßa b·∫°n: ' + flappyScore);
                return;
            }

            flappyCtx.fillStyle = '#FFEB3B';
            flappyCtx.fillRect(50, birdY, 40, 30);
            flappyCtx.fillStyle = '#000';
            flappyCtx.fillRect(80, birdY + 10, 15, 10);

            pipes.forEach(pipe => {
                pipe.x -= 2;
                flappyCtx.fillStyle = '#4CAF50';
                flappyCtx.fillRect(pipe.x, 0, 60, pipe.gap);
                flappyCtx.fillRect(pipe.x, pipe.gap + 150, 60, flappyCanvas.height - pipe.gap - 150);

                if (pipe.x + 60 === 90) {
                    flappyScore++;
                    document.getElementById('flappyScore').innerText = 'ƒêi·ªÉm: ' + flappyScore;
                }

                if (pipe.x < 90 && pipe.x > 10 && (birdY < pipe.gap || birdY + 30 > pipe.gap + 150)) {
                    alert('Game Over! ƒêi·ªÉm c·ªßa b·∫°n: ' + flappyScore);
                    return;
                }
            });

            if (pipes[pipes.length-1].x < 200) pipes.push({x: 400, gap: Math.random() * 200 + 100});
            if (pipes[0].x < -60) pipes.shift();

            requestAnimationFrame(updateFlappy);
        }

        document.addEventListener('keydown', e => { if (e.key === ' ') birdVelocity = jump; });
        flappyCanvas.addEventListener('touchstart', e => { e.preventDefault(); birdVelocity = jump; });

        // Pikachu Gh√©p C·∫∑p
        const emojis = ['üê∂','üê±','üê≠','üêπ','üê∞','ü¶ä','üêª','üêº'];
        let pikachuCards = [...emojis, ...emojis];
        let selected = [];

        function initPikachu() {
            pikachuCards.sort(() => Math.random() - 0.5);
            const board = document.getElementById('pikachuBoard');
            board.innerHTML = '';
            pikachuCards.forEach((emoji, i) => {
                const card = document.createElement('div');
                card.style.background = 'linear-gradient(135deg, #667eea, #764ba2)';
                card.style.height = '70px';
                card.style.borderRadius = '10px';
                card.style.display = 'flex';
                card.style.alignItems = 'center';
                card.style.justifyContent = 'center';
                card.style.fontSize = '40px';
                card.style.cursor = 'pointer';
                card.style.boxShadow = '0 4px 10px rgba(0,0,0,0.3)';
                card.style.transition = 'all 0.3s ease';
                card.onclick = () => flipCard(card, emoji);
                card.ontouchstart = () => flipCard(card, emoji);
                board.appendChild(card);
            });
            document.getElementById('pairsLeft').innerText = '8';
        }

        function flipCard(card, emoji) {
            if (card.innerText || selected.length === 2) return;
            card.innerText = emoji;
            card.style.background = '#fff';
            selected.push({card, emoji});
            if (selected.length === 2) {
                if (selected[0].emoji === selected[1].emoji) {
                    selected[0].card.style.background = '#a8e6cf';
                    selected[1].card.style.background = '#a8e6cf';
                    selected[0].card.style.cursor = 'default';
                    selected[1].card.style.cursor = 'default';
                    let pairs = parseInt(document.getElementById('pairsLeft').innerText) - 1;
                    document.getElementById('pairsLeft').innerText = pairs;
                    if (pairs === 0) {
                        setTimeout(() => alert('üéâ Ch√∫c m·ª´ng! B·∫°n ƒë√£ gh√©p h·∫øt r·ªìi!'), 300);
                    }
                } else {
                    setTimeout(() => {
                        selected[0].card.innerText = '';
                        selected[1].card.innerText = '';
                        selected[0].card.style.background = 'linear-gradient(135deg, #667eea, #764ba2)';
                        selected[1].card.style.background = 'linear-gradient(135deg, #667eea, #764ba2)';
                    }, 800);
                }
                selected = [];
            }
        }
    </script>
</body>
</html>
